---
slug: sunday-projects-hdr-button
title: 'Sunday-Projects ‚Äì HDR Button'
date: 2023-12-03T02:00
authors: [luca]
tags: [artikel, tech, sunday-projects, luca]
draft: false
image: /img/tech/sundayprojects/hdr.jpg
---

import ReactPlayer from 'react-player'
import Image from '@theme/IdealImage'

'Sunday Projects' sind die kleinen, technischen Projekte und Spielereien mit denen ich in unregelm√§√üigen Abst√§nden meine Zeit verbringe.

An diesem Sonntag zeige ich euch einen kleinen physischen Button, den ich nutze, um die HDR-Einstellung meines Windows 11 an- und auszuschalten.

<Image style={{width: '100%'}} img={require('/static/img/tech/sundayprojects/hdr.jpg')} />

<!--truncate-->

## Idee

Seitdem ich meinen Desktopmonitor mit einem modernen OLED-Screen ausgetauscht habe, bin ich, um alle Vorteile genie√üen zu k√∂nnen, leider gezwungen HDR in Windows semi-regelm√§√üig aktivieren und deaktivieren zu m√ºssen.

Klar, das geht recht einfach √ºber die Tastenkombination `WIN + ALT + B`. Aber w√§re es nicht viel cooler, wenn es daf√ºr einen dedizierten Button geben w√ºrde? Und w√§re es nicht noch cooler, wenn sich dieser auch noch angenehm dr√ºcken lassen w√ºrde ‚Äì inklusive sattem Ger√§usch?

<ReactPlayer
    width="100%"
    height="500px"
    controls
    src='https://share.lucanerlich.com/s/ieoKoHSfHfewswg/download/hdrbutton.mp4'
/>

## Umsetzung

Wie praktisch, dass ich noch einen [Puck](https://www.espruino.com/Puck.js) hier herumliegen habe!

<Image style={{width: '100%'}} img={require('./3.jpg')} />

Ich wollte damit eigentlich immer ein *sophisticated* Projekt umsetzen, aber man kennt‚Äôs ja ‚Äì keine Zeit und die Doku ist schei√üe :S

<Image style={{width: '100%'}} img={require('./2.jpg')} />

Das Ding kostet knapp 30 Euro (ja, f√ºr dieses Sonntagsprojekt und dessen Usecase komplett bescheuert). Wird als kleine runde Platine inkl. CR2032-Batterie, Geh√§use und Silikonh√ºlle geliefert.

Batterie rein, Platine in‚Äôs Geh√§use, Silikonh√ºlle dar√ºber, fertig!

<Image style={{width: '100%'}} img={require('./1.jpg')} />

### Sourcecode

Nachfolgend der Code, den ich auf den Puck geladen habe. Da ich keine Ahnung von Hardware, bzw. Bluetoothger√§te-Programmierung habe, musste ich mir das meiste dieses kurzen Scriptes zusammen-googeln, sowie √ºber das Espruino-Forum erfragen.

Der Puck kann bequem √ºber die [Browser-IDE](https://www.espruino.com/ide) bespielt werden.
Am einfachsten ist es, wenn man daf√ºr Chrome nutzt und den Puck direkt √ºber Bluetooth damit verbindet.

```javascript
// http://www.espruino.com/BLE+Keyboard
var kb = require("ble_hid_keyboard");
NRF.setServices(undefined, { hid: kb.report });

// https://forum.espruino.com/conversations/390668/#comment17145677
NRF.setAdvertising([
  2, 1, 6,  // standard Bluetooth
  8, 9, 80, 117, 99, 107, 46, 106, 115, // 'Puck.js' name
  3, 3, 0x12, 0x18, // HID Service
  3, 0x19, 0xc1, 0x03 // Appearance: Keyboard https://btprodspecificationrefs.blob.core.windows.net/assigned-numbers/Assigned%20Number%20Types/Assigned_Numbers.pdf
]);

function btnPressed() {
  kb.tap(kb.KEY.B, kb.MODIFY.LEFT_GUI | kb.MODIFY.LEFT_ALT);
}
setWatch(btnPressed, BTN, { edge: "rising", repeat: true, debounce: 50 });
```

Nach erfolgreicher Verbindung l√§sst sich der Code einfach per Klick auf `Save to Flash` in den Speicher des Pucks laden. Daraufhin die Verbindung zu Chrome trennen und den Puck regul√§r √ºber Bluetooth mit Windows 11 verbinden ‚Äì diese Verbindung wird bei jedem Systemstart erneut hergestellt.

Per Druck auf den Puck ‚Äì der in sich quasi ein Button ist ‚Äì schaltet Windows nun HDR an und bei einem erneuten Druck wieder aus.

Cool, praktisch, haptisch angenehm und selbstverst√§ndlich komplett unn√∂tig. üòâ

Ich danke euch f√ºrs Lesen!

Bis bald. Luca
